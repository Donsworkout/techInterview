
# SQL 치트시트

## 빈출 SQL

### SELECT 기본

#### 1. 정렬

~~~sql
SELECT * FROM ANIMAL_INS
ORDER BY ANIMAL_ID ASC

SELECT * FROM ANIMAL_INS
ORDER BY ANIMAL_ID DESC
~~~

#### 2. 정렬 (복수기준)

~~~sql
SELECT * FROM ANIMAL_INS
ORDER BY NAME ASC, DATETIME DESC
~~~

#### 3. 부정

~~~sql
SELECT * FROM ANIMAL_INS
WHERE INTAKE_CONDITION != "Aged"
~~~

#### 4. LIMIT

~~~sql
SELECT NAME FROM ANIMAL_INS
ORDER BY DATETIME LIMIT 1;
~~~

#### 5. MAX, MIN, COUNT

~~~sql
SELECT MAX(DATETIME) FROM ANIMAL_INS

SELECT MIN(DATETIME) FROM ANIMAL_INS

SELECT COUNT(ANIMAL_ID) AS count FROM ANIMAL_INS
~~~

#### 6. DISTINCT

~~~sql
# aggregation 과 DISTINCT 혼용
SELECT COUNT(DISTINCT(NAME)) AS count FROM ANIMAL_INS

# 그냥 중복 제거
SELECT DISTINCT NAME FROM ANIMAL_INS
~~~

### GROUP BY

#### 1. 그룹 별 COUNT

~~~sql
SELECT ANIMAL_TYPE, COUNT(ANIMAL_ID) AS count
FROM ANIMAL_INS
GROUP BY ANIMAL_TYPE
~~~

#### 2. 그룹 별 COUNT with 조건

~~~sql
SELECT NAME, COUNT(*) AS COUNT
FROM ANIMAL_INS
WHERE NAME IS NOT NULL
GROUP BY NAME
HAVING COUNT(NAME) > 1
~~~

### JOIN

#### 1. LEFT JOIN

> 왼쪽 테이블 엔트리 다 갖고감

~~~sql
SELECT o.ANIMAL_ID, o.NAME
FROM ANIMAL_OUTS AS o
LEFT JOIN ANIMAL_INS AS i
ON o.ANIMAL_ID = i.ANIMAL_ID
WHERE i.ANIMAL_ID IS NULL;
~~~

#### 2. INNER JOIN with selection

~~~sql
SELECT i.ANIMAL_ID, i.NAME FROM ANIMAL_INS as i
INNER JOIN ANIMAL_OUTS as o
ON i.ANIMAL_ID = o.ANIMAL_ID
WHERE i.DATETIME > o.DATETIME
~~~

#### 3. 조인 응용 / LIKE / Where 복수조건

~~~sql
SELECT i.ANIMAL_ID, i.ANIMAL_TYPE, i.NAME 
FROM ANIMAL_INS AS i
INNER JOIN ANIMAL_OUTS AS o ON i.ANIMAL_ID = o.ANIMAL_ID
WHERE i.SEX_UPON_INTAKE LIKE "Intact%"
AND NOT o.SEX_UPON_OUTCOME LIKE "Intact%"
ORDER BY i.ANIMAL_ID
~~~

